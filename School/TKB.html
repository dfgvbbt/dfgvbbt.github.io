<html>

<head>
    <title>Thời Khóa Biểu</title>
</head>
<body>
<script>
Math.Random = function(Min,Max) {
    if (Min>Max) {return Error('Min cannot lower than maximum')}
    if (Max !== 0) {
    Max +=1
    }
    return ( Math.floor(Math.random()*(Max+(Min-Min*2)))+Min )
}
print = console.log
function RemoveAll_Body(){
for (var i in document.all) {
   if (document.body.firstElementChild == undefined){break}
      document.body.firstElementChild.remove()
 }
}
function RemoveAll_Head(){
for (var i in document.all) {
   if (document.head.firstElementChild == undefined){break}
   document.head.firstElementChild.remove()
   
 }
}
function Reset(){
  RemoveAll_Body()
  RemoveAll_Head()
}
function NewElement(TagName,Parent,Window_Op,Proties_Op) {
  var nill = undefined
  var Yo
  if (Parent == nill || Parent == null) {Parent = document.body}
  if (Window_Op !== nill) {
    Yo = Window_Op.document.createElement(TagName)
    Parent.appendChild(Yo)
  } else {
    Yo = document.createElement(TagName)
    Parent.appendChild(Yo)
  }
  if (Proties_Op !== nill && Proties_Op !== {}) {
    for (var index in Proties_Op) {
      Yo[index] = Proties_Op[index]
    }
  }
  return Yo
}
function Add(Name,Time){
    console.log(Name)
    var This = NewElement('h1',document.body,window,{innerText:Name})
    var H = (new Date()).getHours()
    var M = (new Date()).getMinutes()
    var Begin = Time.Begin
    var h_b = Begin.h
    var m_b = Begin.m
    var End = Time.End
    var h_e = End.h
    var m_e = End.m
    var Yellow = '#f6ff00'
    var Green = '#00ff40'
    var IsSameH = false
    
    if (h_b == h_e) {
        
        IsSameH = true
        
    }

    function SetYellow(){
        console.log('Yellow!')
        This.style.color = Yellow
    }
    
    if (H >= h_b) {
        if (IsSameH == true) {
            if (H == h_b && M < m_e) {
                SetYellow()
            }
        } else {
            if (H == h_b && (M >= m_b || M < m_e)) {
                SetYellow()
            }
            if (H == h_e && M < m_e) {
                SetYellow()
            }
        }
    }

    
    if (h_b < H && h_e < H) {
        This.style.color = Green
    }
    
    return This
}
Reset()
var Thu = ['Thứ hai','Thứ ba','Thứ tư','Thứ năm','Thứ sáu','Thứ bảy','Chủ nhật']
var Ngay = Number((new Date()).getDay()-1)
Thu = Thu[Ngay]
var MonVT = {
    NV:'Ngữ văn',
    CN:'Công nghệ',
    TA:'Tiếng anh',
    DL:'Địa lí',
    SHDC:'Sinh hoạt dưới cờ',
    SHCN:'Sinh hoạt chủ nhiệm',
    LS:'Lịch sử',
    HDTN:'Hoạt động trải nghiệm',
    KHTN:'Khoa học tự nhiên',
    AN:'Âm nhạc',
    T:'Toán',
    TH:'Tin Học',
    GDTC:'Giáo dục thể chất(Thể dục)',
    GDCD:'Giáo dục công dân',
    MT:'Mĩ thuật',
    _:'Đi về nhà'
}
var TKB = [
    ['LS','DL','NV','NV','SHDC'],
    ['TH','CN','TA','DL','HDTN'],
    ['T','T','GDCD','KHTN','KHTN'],
    ['GDTC','TA','TA'],
    ['KHTN','KHTN','MT','GDTC','AN'],
    ['T','T','NV','NV','SHCN']
]
console.log(TKB[Ngay])
var TG = [
    {
        Begin:{h:13,m:0},
        End:{h:13,m:45}
    },
    {
        Begin:{h:13,m:50},
        End:{h:14,m:35}
    },
    {
        Begin:{h:14,m:45},
        End:{h:15,m:40}
    },
    {
        Begin:{h:15,m:45},
        End:{h:16,m:30}
    },
    {
        Begin:{h:16,m:35},
        End:{h:17,m:20}
    }
]

var Buoi = ''
(function hi() {
    _ = new Date()
    Itr = (S,E)=>{return _.getHours() >= S && _.getHours() <= E && (_.getHours() <= E && _.getMinutes() <= 59 && _.getSeconds() <= 59)}
    //Is time around
    if (Itr(1,10)) {
        Buoi = 'Sáng'
        console.log(Buoi)
    } else if (Itr(11,12)) {
        Buoi = 'Trưa'
        console.log(Buoi)
    } else if (Itr(13,18)) {
        Buoi = 'Chiều'
        console.log(Buoi)
    } else if (Itr(19,21)) {
        Buoi = 'Tối'
        console.log(Buoi)
    } else if (Itr(22,24)) {
        Buoi = 'Đêm'
        console.log(Buoi)
    }
})()

var _Tuan = Math.floor((((new Date()) - (new Date(2023, 1, 6))) / (1000 * 60 * 60 * 24))/7)+21
var Time = NewElement('h1',document.body)
Time.innerText = (new Date()).getDate() + '/' + Number((new Date()).getMonth()+1) + '/' + (new Date()).getFullYear() + ' | '+Buoi+' | '+ Thu + ' | Tuần '+_Tuan

var TKBHN = NewElement('h1',document.body,window,{innerText:'Thời Khóa Biểu Hôm Nay:\n'})


for (i in TKB[Ngay]) {
    var v = TKB[Ngay][i]
    Add(MonVT[v],TG[i])
}
</script>
